# Day 9: 밧줄 다리 (Rope Bridge)
<https://adventofcode.com/2022/day/9>

## Part 1
이 밧줄 다리는 걸을 때 삐걱거리는 소리가 납니다. 얼마나 오래되었는지, 당신의 체중을 지탱할 수 있는지도 확실하지 않습니다.

그래도 엘프들이 지나가기엔 문제가 없어 보입니다. 다리는 당신 밑에 있는 거대한 강에 의해 조각된 협곡에 걸쳐 있습니다.

당신은 조심스럽게 발을 내딛어봅니다. 그 순간, 밧줄이 늘어나고 꼬여버렸습니다. 당시은 밧줄 물리학을 모델링하는데 신경쓰기로 결정했습니다. 아마 당신이 **밟지 말아야 할 곳**을 알아낼 수 있을 것입니다.

양 끝에 매듭이 있는 밧줄을 생각해 보세요. 이 매듭들은 밧줄의 **머리**와 **꼬리**를 표시합니다. 만약 머리가 꼬리에서 충분히 멀리 움직인다면, 꼬리는 머리 쪽으로 당겨집니다.

[플랑크 길이](https://en.wikipedia.org/wiki/Planck_units#Planck_length)와 관련된 모호한 추론에 기인하여, 당신은 2차원 공간에서 매듭의 위치를 ​​모델링할 수 있어야 합니다. 그러고나면 머리에 대한 **일련의 가상 동작**(퍼즐 입력)을 따라 꼬리가 어떻게 움직일지 알아낼 수 있습니다.

앞서 언급한 플랑크 길이 때문에, 로프는 매우 짧아야 합니다. 사실, 머리(`H`)와 꼬리(`T`)는 항상 닿아있어야 합니다. (대각선으로 인접하거나 겹치더라도, 접촉하는 것으로 간주됩니다)

``` text
....
.TH.
....

....
.H..
..T.
....

...
.H. (H가 T를 덮고있음(곂침))
...
```

머리가 꼬리에서부터 바로 위쪽, 아래쪽, 왼쪽 또는 오른쪽으로 두 칸 떨어진 위치로 이동하는 경우, 꼬리도 머리와 가까이 유지되도록 해당 방향으로 한 칸 이동해야 합니다.

``` text
.....    .....    .....
.TH.. -> .T.H. -> ..TH.
.....    .....    .....

...    ...    ...
.T.    .T.    ...
.H. -> ... -> .T.
...    .H.    .H.
...    ...    ...
```

위 경우와 다르게, 머리와 꼬리가 서로 닿지 않으면서 같은 행이나 열에 있지 않으면, 꼬리는 항상 대각선으로 한 칸씩 이동하여 따라잡습니다.

``` text
.....    .....    .....
.....    ..H..    ..H..
..H.. -> ..... -> ..T..
.T...    .T...    .....
.....    .....    .....

.....    .....    .....
.....    .....    .....
..H.. -> ...H. -> ..TH.
.T...    .T...    .....
.....    .....    .....
```

당신은 머리가 일련의 움직임을 따라 움직일 때, 꼬리가 어디로 가는지 알아내면 됩니다. 머리와 꼬리는 같은 위치에서 시작하여 겹치는 것으로 가정합니다.  

예를 들어봅시다.

``` text
R 4
U 4
L 3
D 1
R 4
D 1
L 5
R 2
```

이 일련의 동작은 머리를 **오른쪽**으로 4칸, **위**로 4칸, **왼쪽**으로 3칸, **아래**로 1칸 등으로 이동시킵니다. 각 단계 후에 머리와 꼬리가 인접해있지 않다면, 꼬리의 위치를 갱신해야 합니다. 시각적으로 표현하면, 이러한 동작은 다음과 같이 이루어집니다. (`s`는 시작 위치를 기준점으로 표시한 것입니다.)

``` text
== 초기 상태 ==

......
......
......
......
H.....  (H covers T, s)

== R 4 ==

......
......
......
......
TH....  (T covers s)

......
......
......
......
sTH...

......
......
......
......
s.TH..

......
......
......
......
s..TH.

== U 4 ==

......
......
......
....H.
s..T..

......
......
....H.
....T.
s.....

......
....H.
....T.
......
s.....

....H.
....T.
......
......
s.....

== L 3 ==

...H..
....T.
......
......
s.....

..HT..
......
......
......
s.....

.HT...
......
......
......
s.....

== D 1 ==

..T...
.H....
......
......
s.....

== R 4 ==

..T...
..H...
......
......
s.....

..T...
...H..
......
......
s.....

......
...TH.
......
......
s.....

......
....TH
......
......
s.....

== D 1 ==

......
....T.
.....H
......
s.....

== L 5 ==

......
....T.
....H.
......
s.....

......
....T.
...H..
......
s.....

......
......
..HT..
......
s.....

......
......
.HT...
......
s.....

......
......
HT....
......
s.....

== R 2 ==

......
......
.H....  (H covers T)
......
s.....

......
......
.TH...
......
s.....
```

밧줄을 시뮬레이션한 후, 꼬리가 한 번 이상 방문한 모든 위치의 개수를 헤아릴 수 있습니다. 아래 다이어그램은 시작 위치 `s`를 표시하고 꼬리가 방문한 다른 위치 `#`을 표시합니다. (시작 위치는 꼬리가 방문한 것으로 간주합니다.)

``` text
..##..
...##.
.####.
....#.
s###..
```

따라서 꼬리가 한 번 이상 방문한 위치의 개수는 `13`입니다.

주어진 일련의 동작을 시뮬레이션하십시오. 밧줄의 꼬리가 한 번 이상 방문하는 위치의 개수는 몇인가요?

# Part 2
밧줄이 끊어졌습니다! 당신은 급작스럽게 강을 향해 떨어지고 있습니다. 다리는 여전히 그대로 있지만, 당신이 공중에서 떨어지는 동안 끊어진 로프 중 일부가 당신을 향해 채찍질하기 시작했습니다!

밧줄은 너무 빨리 움직여서 잡을 수가 없습니다. 당신이 가진 것은 밧줄에 맞지 않으려 몸을 구부릴 몇 초 밖에 없습니다. 다행히 시뮬레이션을 확장하여 더 긴 밧줄에도 적용할 수 있습니다.

이제 두 개의 매듭이 아닌 열 개의 매듭으로 구성된 밧줄을 시뮬레이션해야 합니다. 하나의 매듭은 여전히 밧줄의 머리이며 일련의 동작에 따라 움직입니다. 밧줄 아래에 있는 각각의 매듭은 이전과 동일한 규칙을 사용하여 그 앞의 매듭을 따릅니다.

위의 예와 동일한 일련의 동작을 사용하지만, 매듭점이 H, 1, 2, ..., 9로 표시된 경우, 이제 다음과 같이 동작할 것입니다.

``` text
== Initial State ==

......
......
......
......
H.....  (H covers 1, 2, 3, 4, 5, 6, 7, 8, 9, s)

== R 4 ==

......
......
......
......
1H....  (1 covers 2, 3, 4, 5, 6, 7, 8, 9, s)

......
......
......
......
21H...  (2 covers 3, 4, 5, 6, 7, 8, 9, s)

......
......
......
......
321H..  (3 covers 4, 5, 6, 7, 8, 9, s)

......
......
......
......
4321H.  (4 covers 5, 6, 7, 8, 9, s)

== U 4 ==

......
......
......
....H.
4321..  (4 covers 5, 6, 7, 8, 9, s)

......
......
....H.
.4321.
5.....  (5 covers 6, 7, 8, 9, s)

......
....H.
....1.
.432..
5.....  (5 covers 6, 7, 8, 9, s)

....H.
....1.
..432.
.5....
6.....  (6 covers 7, 8, 9, s)

== L 3 ==

...H..
....1.
..432.
.5....
6.....  (6 covers 7, 8, 9, s)

..H1..
...2..
..43..
.5....
6.....  (6 covers 7, 8, 9, s)

.H1...
...2..
..43..
.5....
6.....  (6 covers 7, 8, 9, s)

== D 1 ==

..1...
.H.2..
..43..
.5....
6.....  (6 covers 7, 8, 9, s)

== R 4 ==

..1...
..H2..
..43..
.5....
6.....  (6 covers 7, 8, 9, s)

..1...
...H..  (H covers 2)
..43..
.5....
6.....  (6 covers 7, 8, 9, s)

......
...1H.  (1 covers 2)
..43..
.5....
6.....  (6 covers 7, 8, 9, s)

......
...21H
..43..
.5....
6.....  (6 covers 7, 8, 9, s)

== D 1 ==

......
...21.
..43.H
.5....
6.....  (6 covers 7, 8, 9, s)

== L 5 ==

......
...21.
..43H.
.5....
6.....  (6 covers 7, 8, 9, s)

......
...21.
..4H..  (H covers 3)
.5....
6.....  (6 covers 7, 8, 9, s)

......
...2..
..H1..  (H covers 4; 1 covers 3)
.5....
6.....  (6 covers 7, 8, 9, s)

......
...2..
.H13..  (1 covers 4)
.5....
6.....  (6 covers 7, 8, 9, s)

......
......
H123..  (2 covers 4)
.5....
6.....  (6 covers 7, 8, 9, s)

== R 2 ==

......
......
.H23..  (H covers 1; 2 covers 4)
.5....
6.....  (6 covers 7, 8, 9, s)

......
......
.1H3..  (H covers 2, 4)
.5....
6.....  (6 covers 7, 8, 9, s)
```

이제 새로운 꼬리 `9`가 방문하는 위치를 추적해야 합니다. 위 예시에서 꼬리는 절대 움직이지 않으므로 한 개의 위치만 방문합니다. 그러나 주의 하십시오. 이전보다 더 많은 유형의 동작이 가능하므로, 시뮬레이션된 밧줄을 위의 것과 시각적으로 비교할 수 있습니다.

더 큰 예시는 다음과 같습니다.

``` text
R 5
U 8
L 8
D 3
R 17
D 10
L 25
U 20
```

이러한 동작은 다음과 같이 동작합니다(개별 단계는 표시되지 않음).

``` text
== Initial State ==

..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
...........H..............  (H covers 1, 2, 3, 4, 5, 6, 7, 8, 9, s)
..........................
..........................
..........................
..........................
..........................

== R 5 ==

..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
...........54321H.........  (5 covers 6, 7, 8, 9, s)
..........................
..........................
..........................
..........................
..........................

== U 8 ==

..........................
..........................
..........................
..........................
..........................
..........................
..........................
................H.........
................1.........
................2.........
................3.........
...............54.........
..............6...........
.............7............
............8.............
...........9..............  (9 covers s)
..........................
..........................
..........................
..........................
..........................

== L 8 ==

..........................
..........................
..........................
..........................
..........................
..........................
..........................
........H1234.............
............5.............
............6.............
............7.............
............8.............
............9.............
..........................
..........................
...........s..............
..........................
..........................
..........................
..........................
..........................

== D 3 ==

..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
.........2345.............
........1...6.............
........H...7.............
............8.............
............9.............
..........................
..........................
...........s..............
..........................
..........................
..........................
..........................
..........................

== R 17 ==

..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
................987654321H
..........................
..........................
..........................
..........................
...........s..............
..........................
..........................
..........................
..........................
..........................

== D 10 ==

..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
...........s.........98765
.........................4
.........................3
.........................2
.........................1
.........................H

== L 25 ==

..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
...........s..............
..........................
..........................
..........................
..........................
H123456789................

== U 20 ==

H.........................
1.........................
2.........................
3.........................
4.........................
5.........................
6.........................
7.........................
8.........................
9.........................
..........................
..........................
..........................
..........................
..........................
...........s..............
..........................
..........................
..........................
..........................
..........................
```

이제 꼬리(`9`)가 `36`개의 위치(`s` 포함)를 적어도 한 번 방문합니다.

``` text
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
#.........................
#.............###.........
#............#...#........
.#..........#.....#.......
..#..........#.....#......
...#........#.......#.....
....#......s.........#....
.....#..............#.....
......#............#......
.......#..........#.......
........#........#........
.........########.........
```

10개의 매듭으로 이루어진 더 큰 밧줄에서 일련의 동작을 시뮬레이션합니다. 로프의 꼬리가 한 번 이상 방문하는 위치의 개수는 몇인가요?